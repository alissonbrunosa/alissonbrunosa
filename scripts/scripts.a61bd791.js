"use strict";angular.module("note-app.constants",[]);var CONFIGURATION={target:"http://api.dontnote.com"};angular.module("note-app.constants").constant("Configuration",CONFIGURATION),angular.module("note-app.services",[]),function(){var a=function(a){function b(b){return a.target+"/public/"+b}var c=this;c.publicUrl=b};angular.module("note-app.services").service("Util",a),a.$inject=["Configuration"]}(),function(){var a=function(a){function b(){return a.get("token")}var c=this;c.currentToken=b};angular.module("note-app.services").service("Auth",a),a.$inject=["$cookies"]}(),function(){var a=function(a,b,c){function d(c,d){return a({method:h,url:b.publicUrl(c),params:d})}function e(c,d){return a.post(b.publicUrl(c),d)}function f(c){return a({method:i,url:b.publicUrl(c)})}function g(c,d){return a.patch(b.publicUrl(c),d)}var h="GET",i="DELETE",j={};return j.Public={},j.Public.get=d,j.Public.post=e,j.Public.patch=g,j.Public["delete"]=f,j};angular.module("note-app.services").service("HTTP",a),a.$inject=["$http","Util","Auth"]}(),angular.module("note-app.presenters",[]),function(){var a=function(a){function b(){c(),$(".modal-trigger").leanModal({complete:l.resetModel})}function c(){a(function(){Macy.init({container:"#panel",trueOrder:!1,waitForImages:!1,margin:15,breakAt:{1280:5,993:4,601:3,400:2}}),k()},0,!1)}function d(){$("#modal").openModal({ready:Materialize.updateTextFields,complete:l.resetModel})}function e(a){l.resetModel=a}function f(b){a(function(){Materialize.toast(b,3e3)},0,!1)}function g(){a(function(){Macy.recalculate()},0)}function h(){a(function(){Macy.recalculate(),k()},300)}function i(a){$("#note-"+a).addClass("hidden")}function j(a){$("#note-"+a).removeClass("hidden")}function k(){$(".card-note").removeClass("hidden")}var l=this;l.configureView=b,l.openModal=d,l.setResetModel=e,l.notify=f,l.recalculate=g,l.hideElement=i,l.showElement=j,l.showNotes=k,l.reconfigureView=h};angular.module("note-app.presenters").service("NotePresenter",a),a.$inject=["$timeout"]}(),angular.module("note-app.controllers",[]),function(){var a=function(a){function b(b){a.path("/"+b)}var c=this;c.toNotes=b};angular.module("note-app.controllers").controller("AboutCtrl",a),a.$inject=["$location"]}(),function(){var a=function(a,b,c,d,e){function f(){k.username?b.Public.get(k.username+"/notes.json").success(function(b){k.notes=b,a.configureView()}).error(function(a){console.error(a)}):e.path("/")}function g(a){b.Public.post(k.username+"/notes.json",a).success(function(a){k.notes.push(a)}).error(function(a){console.error(a)})}function h(b){a.hideElement(b.id),k.form=_.remove(k.notes,{id:b.id}).shift(),a.openModal()}function i(a){b.Public.patch(k.username+"/notes/"+a.id+".json",a).success(function(a){k.notes.push(a)}).error(function(a){console.error(a)})}function j(c){b.Public["delete"](k.username+"/notes/"+c.id+".json").success(function(){a.hideElement(c.id),_.remove(k.notes,{id:c.id}),a.notify("Note removida!")}).error(function(a){console.error(a)})}var k=this;k.username=d.username,k.create=g,k.edit=h,k.update=i,k.remove=j,f(),a.setResetModel(function(){k.form={},c.$apply()}),c.$watchCollection("Note.notes",function(b,c){b&&a.reconfigureView()}),c.$watch("Note.query",function(b,c){$(".card-note").removeClass("hidden").show(),b&&b.length>=3?_.forEach(k.notes,function(b){var c=b.title||"",d=b.body||"",e=c.includes(k.query)||d.includes(k.query);e||(a.hideElement(b.id),$("#note-"+b.id).hide())}):$(".card-note").removeClass("hidden").show(),a.recalculate()})};angular.module("note-app.controllers").controller("NoteCtrl",a),a.$inject=["NotePresenter","HTTP","$scope","$routeParams","$location"]}(),angular.module("note-app",["note-app.constants","note-app.services","note-app.presenters","note-app.controllers","ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"About"}).when("/:username",{templateUrl:"views/note.html",controller:"NoteCtrl",controllerAs:"Note"}).otherwise({redirectTo:"/"})}]),function(){var a=function(){return{restrict:"A",link:function(a,b,c){var d=a.note.body;d&&(d.length<=10?b.addClass("large"):d.length>10&&d.length<=30?b.addClass("medium"):d.length>=30&&b.addClass("small"))}}};angular.module("note-app").directive("ntClass",a)}();